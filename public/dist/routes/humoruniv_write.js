"use strict";(()=>{var w=Object.defineProperty;var x=(e,t,r)=>t in e?w(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r;var u=(e,t,r)=>(x(e,typeof t!="symbol"?t+"":t,r),r);var m=chrome,l=m,f=class{constructor({name:t,enable:r=!0,prefixStyle:a}={}){u(this,"name","");u(this,"enable",!0);u(this,"prefixStyle","");t&&(this.name=t),this.enable=r,a&&(this.prefixStyle=a)}prefix(){let t=y.format(new Date,"Y-m-d H:i:s.v"),r=[];return this.name&&(this.prefixStyle?r.push(`${t} %c${this.name}`,this.prefixStyle):r.push(`${t} ${this.name}`)),r}log(...t){!this.enable||console.log(...this.prefix(),...t)}warn(...t){!this.enable||console.warn(...this.prefix(),...t)}error(...t){!this.enable||console.error(...this.prefix(),...t)}info(...t){!this.enable||console.info(...this.prefix(),...t)}},D=new f({name:`${m.runtime.getManifest().name}`,prefixStyle:"background: #F58E86; color: white; font-size: 11px; padding: 1px 10px;",enable:!1});var y={format:function(e,t){let r=e.getFullYear(),a=e.getMonth(),s=e.getDate(),i=e.getDay(),o=e.getHours(),h=e.getMinutes(),g=e.getSeconds(),b=e.getMilliseconds(),n="";for(let c=0,d=t.length;c<d;c++){let p=t.charAt(c);switch(p){case"#":if(c==d-1)break;n+=t.charAt(++c);break;case"Y":n+=r;break;case"y":n+=r.toString().substr(2,2);break;case"m":n+=(a+1).toString().padStart(2,"0");break;case"n":n+=a+1;break;case"d":n+=s.toString().padStart(2,"0");break;case"j":n+=s;break;case"w":n+=i;break;case"N":n+=this.isoDay(i);break;case"l":n+=this.weekFullEn[i];break;case"D":n+=this.weekFullEn[i].substr(0,3);break;case"J":n+=this.weekKr[i];break;case"K":n+=this.weekKr[i];break;case"F":n+=this.monthFullEn[a];break;case"M":n+=this.monthFullEn[a].substr(0,3);break;case"a":n+=this.ampm(o);break;case"A":n+=this.ampm(o).toUpperCase();break;case"H":n+=o.toString().padStart(2,"0");break;case"h":n+=this.from24to12(o).toString().padStart(2,"0");break;case"g":n+=this.from24to12(o);break;case"G":n+=o;break;case"i":n+=h.toString().padStart(2,"0");break;case"s":n+=g.toString().padStart(2,"0");break;case"t":n+=this.lastDayOfMonth(e);break;case"L":n+=this.isLeapYear(r);break;case"z":n+=this.dateCount(r,a,s);break;case"S":n+=this.dateSuffix[s-1];break;case"v":n+=b;break;default:n+=p;break}}return n},weekFullEn:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekKr:["\uC77C","\uC6D4","\uD654","\uC218","\uBAA9","\uAE08","\uD1A0"],monthFullEn:["January","February","March","April","May","June","July","August","September","October","November","December"],dateSuffix:["st","nd","rd","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","th","st","nd","rd","th","th","th","th","th","th","th","st"],from24to12:function(e){return e>12?e-12:e},ampm:function(e){return e<12?"am":"pm"},isoDay:function(e){return e==0?7:e},lastDayOfMonth:function(e){let t=new Date(e.getFullYear(),e.getMonth()+1,1);return t.setTime(t.getTime()-1),t.getDate()},isLeapYear:function(e){let t=new Date(e,0,1),r=0;for(let a=0;a<12;a++)t.setMonth(a),r+=this.lastDayOfMonth(t);return r==365?"0":"1"},dateCount:function(e,t,r){let a=new Date(e,0,1),s=-1;for(let i=0;i<t;i++)a.setMonth(i),s+=this.lastDayOfMonth(a);return s+r},distance:function(e,t=new Date){let r=e.getTime()-t.getTime(),a=e.getTime()>=t.getTime(),s=Math.abs(Math.floor(r/(1e3*60*60*24))),i=Math.abs(Math.floor(r%(1e3*60*60*24)/(1e3*60*60))),o=Math.abs(Math.floor(r%(1e3*60*60)/(1e3*60))),h=Math.abs(Math.floor(r%(1e3*60)/1e3));return{isFuture:a,day:s,hours:i,minutes:o,seconds:h}},dday:function(e,t=new Date){e.setHours(0,0,0,0),t.setHours(0,0,0,0);let r=this.distance(e,t);return`D${r.isFuture?"-":"+"}${r.day==0?"DAY":r.day}`}};function k(e){var a;let t=[],r=(a=e.parentNode)==null?void 0:a.firstChild;for(;r;)r!==e&&r.nodeType===Node.ELEMENT_NODE&&t.push(r),r=r.nextElementSibling||r.nextSibling;return t}l.storage.sync.get(["write.picture.adjustx","write.picture.adjusty","write.picture.cursor","write.picture.cursorDot","write.picture.careful","write.picture.colpickImmed"],function(e){sauron(["form[name='new1']","input[name=upload1]"],()=>{var r;let t=document.querySelector("input[name=upload1]");if(t){k(t).map(s=>s.remove());let a=document.createElement("div");a.classList.add("humanagerPicture"),(r=t.parentElement)==null||r.append(a),e={"write.picture":!0,"write.picture.cursor":!0,"write.picture.cursorDot":!0,"write.picture.careful":!1,"write.picture.colpickImmed":!1,"write.picture.adjustx":0,"write.picture.adjusty":0,...e},jQuery(".humanagerPicture").kdrawing({adjust:{x:Number(e["write.picture.adjustx"]),y:Number(e["write.picture.adjusty"])},width:413,height:257,customCursor:e["write.picture.cursor"],customCursorDot:e["write.picture.cursorDot"],carefulAction:e["write.picture.careful"],colorpickerImmediately:e["write.picture.colpickImmed"],onChange:function(s,i){$("[name='upload1']").val(s.split(",")[1]),e["write.picture.adjustx"]=i.adjust.x,e["write.picture.adjusty"]=i.adjust.y},onSave:function(s,i){this.kdrawingFadeAlert("\uC800\uC7A5 \uC911...",!1),$(window).on("beforeunload",function(){return`\uC791\uC5C5 \uB0B4\uC6A9\uC774 \uC800\uC7A5 \uC911\uC785\uB2C8\uB2E4.
\uADF8\uB798\uB3C4 \uD398\uC774\uC9C0\uB97C \uBC97\uC5B4\uB098\uC2DC\uACA0\uC2B5\uB2C8\uAE4C?`});let o={color:i.color,colors:i.colors,width:i.width,height:i.height,history:i.history,tool:i.tool,tool_id:i.tool_id};l.storage.local.set({"write.picture":{url:s,data:o}},()=>{this.kdrawingFadeAlert("\uC800\uC7A5 \uC644\uB8CC."),$(window).off("beforeunload")})},onLoad:function(s){l.storage.local.get(["write.picture"],i=>{s(i["write.picture"])})}})}})});})();
